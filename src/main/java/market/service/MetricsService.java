package market.service;

/**
 * Сервис сбора и предоставления метрик работы приложения.
 * <p>
 * Отвечает за хранение и обновление статистических данных:
 * количество товаров, время последнего запроса, показатели кэша и т.д.
 * <p>
 * Может использоваться для анализа производительности и мониторинга состояния системы.
 */
public interface MetricsService {
    /**
     * Устанавливает текущее количество товаров в каталоге.
     *
     * @param n число товаров
     */
    void setProductCount(int n);

    /**
     * Устанавливает время выполнения последнего запроса (в миллисекундах).
     *
     * @param ms время выполнения последнего запроса в миллисекундах
     */
    void setLastQueryMillis(long ms);

    /**
     * Обновляет статистику по кэшу (количество попаданий и промахов).
     *
     * @param hits   количество успешных обращений к кэшу
     * @param misses количество промахов кэша (когда данные не найдены)
     */
    void setCache(long hits, long misses);

    /**
     * Возвращает сводку текущих метрик в виде текстового отчёта.
     * <p>
     * Пример результата:
     * <pre>
     * --- Метрики ---
     * products: 123
     * lastQueryMs: 4
     * cache: hits=78, misses=12
     * </pre>
     *
     * @return текстовое представление текущего состояния метрик
     */
    String snapshot();
}
