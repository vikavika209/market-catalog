package market.repo;

/**
 * Простой генератор уникальных идентификаторов.
 * <p>
 * Используется для последовательной генерации числовых ID в оперативной памяти
 * или при работе с файловыми репозиториями (например, CSV).
 * <p>
 * Генератор не является потокобезопасным и предназначен
 * для использования в однопоточном окружении (например, консольное приложение).
 */
public class IdGenerator {

    /**
     * Текущее значение последовательности.
     */
    private long seq;

    /**
     * Создаёт новый генератор, начиная с указанного стартового значения.
     *
     * @param start начальное значение счётчика (обычно 0 или максимальный ID из файла)
     */
    public IdGenerator(long start) {
        this.seq = start;
    }

    /**
     * Возвращает следующий уникальный идентификатор и увеличивает внутренний счётчик.
     *
     * @return следующий уникальный идентификатор
     */
    public long next() {
        return ++seq;
    }

    /**
     * Возвращает текущее значение счётчика без его увеличения.
     * <p>
     * Полезно, если нужно узнать последний выданный ID,
     * но не генерировать новый.
     *
     * @return текущее значение идентификатора
     */
    public long peek() {
        return seq;
    }
}
